<form [formGroup]="addRecordForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
  <div>
    <label for="userName">User Name*</label>
    <input id="userName" formControlName="userName" type="text" />
    <div *ngIf="userName?.touched && userName?.invalid">
      <small *ngIf="userName?.errors?.required">User Name обязательно.</small>
      <small *ngIf="userName?.errors?.pattern">Только латинские буквы и цифры.</small>
    </div>
  </div>

  <div>
    <label for="email">E-mail*</label>
    <input id="email" formControlName="email" type="email" />
    <div *ngIf="email?.touched && email?.invalid">
      <small *ngIf="email?.errors?.required">E-mail обязательно.</small>
      <small *ngIf="email?.errors?.email">Неверный E-mail.</small>
    </div>
  </div>

  <div>
    <label for="homePage">Home Page</label>
    <input id="homePage" formControlName="homePage" type="url" />
    <div *ngIf="homePage?.touched && homePage?.invalid">
      <small *ngIf="homePage?.errors?.invalidUrl">Неверный URL.</small>
    </div>
  </div>

  <div>
    <label for="captcha">CAPTCHA*</label>
    <div>
      <img
        [src]="captchaImageUrl"
        alt="CAPTCHA"
        (click)="refreshCaptcha()"
        title="Нажмите, чтобы обновить"
        style="cursor: pointer"
      />
      <button type="button" (click)="refreshCaptcha()">Обновить CAPTCHA</button>
    </div>
    <input id="captcha" formControlName="captcha" type="text" />
    <div *ngIf="captcha?.touched && captcha?.invalid">
      <small *ngIf="captcha?.errors?.required">CAPTCHA обязательно.</small>
      <small *ngIf="captcha?.errors?.pattern">Только латинские буквы и цифры.</small>
    </div>
  </div>

  <div>
    <label for="text">Text*</label>
    <quill-editor formControlName="text" [modules]="quillModules" style="height: 200px; width: 100%;"></quill-editor>
    <div *ngIf="text?.touched && text?.invalid">
      <small *ngIf="text?.errors?.required">Заполните поле текста.</small>
      <small *ngIf="text?.errors?.invalidHtml">Использованы запрещённые HTML теги.</small>
    </div>
  </div>

  <div>
    <label for="image">Добавить изображение</label>
    <input id="image" type="file" (change)="onImageSelected($event)" accept=".jpg,.jpeg,.png,.gif" />
    <div *ngIf="imageError" class="error text-danger">
      {{ imageError }}
    </div>
    <div *ngIf="imagePreview">
      <a href="javascript:void(0)" (click)="openImageLightbox()">
        <img [src]="imagePreview" alt="Image Preview" width="320" height="240" style="cursor: pointer" />
      </a>
    </div>
  </div>

  <div>
    <label for="textFile">Добавить текстовый файл</label>
    <input id="textFile" type="file" (change)="onTextFileSelected($event)" accept=".txt" />
    <div *ngIf="textFileError" class="error text-danger">
      {{ textFileError }}
    </div>
    <div *ngIf="textFileContent">
      <pre>{{ textFileContent }}</pre>
    </div>
  </div>

  <button type="submit" class="btn btn-primary mt-3">Добавить комментарий</button>
</form>
